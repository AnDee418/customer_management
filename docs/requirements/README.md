# 社内顧客管理システム 要件定義（ドラフト）

本ディレクトリは、社内顧客管理システム（以下、本システム）の要件定義と仕様のドラフトをまとめたものです。各章は独立してレビュー可能で、章間の参照リンクで横断的に確認できます。

## 目次
- [01_ビジネス要件](./01_business_requirements.md)
- [02_ペルソナとユースケース](./02_personas_use_cases.md)
- [03_データモデル（Supabase）](./03_data_model_supabase.md)
- [04_外部API連携要件（発注/測定）](./04_external_api_integration.md)
- [05_アーキテクチャとAPI境界](./05_architecture.md)
- [06_非機能・セキュリティ・運用](./06_nonfunctional_security_ops.md)
- [07_フロントエンド設計ルール](./07_frontend_design_rules.md) ⭐ **重要**

## ステータス
- ドラフト版: v0.4（OAuth2 CCでM2M統一、監査は管理者）

## 決定事項（現時点）
- マイクロサービス前提、顧客管理は Owning Service（書き込み一元化）
- リアルタイム優先、原則キャッシュ不使用、強整合読み取り
- 鮮度SLO: Source→DB→UI の P99 ≤ 3秒（合意）
- 容量計画: 顧客 10万、担当者 30万、発注 100万/年、測定 500万/年、保有5年
- コールドバックアップ: 月1で実機NASに取得、復元機能は必須
- M2M/内部API 認証: OAuth2 Client Credentials を採用
- 監査閲覧: 管理者が担当（auditorロールは不採用）

## 未決事項（要オーナー判断）
- RPO/RTO の最終値（現行: RPO≤15分, RTO≤4時間案）

## 更新履歴
- 2025-10-17: v0.3 リアルタイム最優先/キャッシュ不使用/Webhook-first 反映
- 2025-10-17: v0.2 マイクロサービス/RLS/M2M/SLA 反映
- 2025-10-17: v0.1 初版ドラフト作成
