# ===============================
# バックアップスクリプト環境変数設定
# ===============================
#
# 使用方法:
#   1. このファイルを .env.backup としてコピー
#   2. 各変数を実際の環境に合わせて設定
#   3. ファイルのパーミッションを制限 (chmod 600 .env.backup)
#
# 注意:
#   - このファイルには機密情報が含まれます
#   - Gitにコミットしないでください (.gitignore に追加済み)
#   - バックアップスクリプトと同じディレクトリに配置してください
#

# ===============================
# 必須設定
# ===============================

# Supabase PostgreSQL接続URL（必須）
# 形式: postgresql://user:password@host:port/database
# 取得方法: Supabaseダッシュボード > Project Settings > Database > Connection string
SUPABASE_DB_URL="postgresql://postgres.xxxxx:[YOUR-PASSWORD]@aws-0-ap-northeast-1.pooler.supabase.com:6543/postgres"

# ===============================
# バックアップ保存先設定
# ===============================

# バックアップ保存先ディレクトリ（必須）
# デフォルト: /mnt/nas/customer_management/backups
# NASマウントポイントを指定してください
BACKUP_BASE_DIR="/mnt/nas/customer_management/backups"

# ===============================
# 暗号化設定（オプション）
# ===============================

# バックアップファイルを暗号化するか
# true: GPG暗号化を有効化
# false: 暗号化なし（デフォルト）
BACKUP_ENCRYPTION="false"

# GPG暗号化の受信者（BACKUP_ENCRYPTION=true の場合は必須）
# GPG公開鍵のメールアドレスまたはキーID
# 事前にGPG鍵ペアを作成し、公開鍵をインポートしてください
# 例: GPG_RECIPIENT="backup@example.com"
# GPG_RECIPIENT=""

# ===============================
# 検証設定（オプション）
# ===============================

# テスト復元用データベースURL（オプション）
# 設定すると、backup_verification.sh がテスト復元を実行します
# 本番環境とは別の検証用データベースを指定してください
# 例: TEST_DB_URL="postgresql://postgres:test@localhost:5432/test_restore"
# TEST_DB_URL=""

# ===============================
# 通知設定（オプション）
# ===============================

# バックアップ成功時の通知WebhookURL（オプション）
# SlackやDiscord、Microsoft Teamsなどのincoming webhook URLを指定
# 例: WEBHOOK_SUCCESS_URL="https://hooks.slack.com/services/xxx/yyy/zzz"
# WEBHOOK_SUCCESS_URL=""

# バックアップ失敗時の通知WebhookURL（オプション）
# SlackやDiscord、Microsoft Teamsなどのincoming webhook URLを指定
# 例: WEBHOOK_FAILURE_URL="https://hooks.slack.com/services/xxx/yyy/zzz"
# WEBHOOK_FAILURE_URL=""

# ===============================
# 補足情報
# ===============================
#
# バックアップスケジュール:
#   - monthly_backup.sh: 毎月1日 3:00 AM（cron設定推奨）
#   - backup_verification.sh: 毎月2日（バックアップの翌日推奨）
#
# バックアップ保持期間:
#   - 60ヶ月（5年間）
#   - 古いバックアップは自動削除されます
#
# 必要なコマンド:
#   - pg_dump（PostgreSQLクライアントツール）
#   - gzip（圧縮）
#   - sha256sum または shasum（チェックサム生成）
#   - gpg（暗号化を有効化する場合）
#   - psql（テスト復元を有効化する場合）
#
# GPG鍵ペア作成例:
#   gpg --full-generate-key
#   gpg --export -a "backup@example.com" > public.key
#   gpg --export-secret-key -a "backup@example.com" > private.key
#
# 復元手順:
#   詳細は docs/BACKUP_RECOVERY.md を参照してください
#
